<!doctype html>
<html class="default" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <title>trace | tarsec</title>
    <meta name="description" content="Documentation for tarsec" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../assets/style.css" />
    <link rel="stylesheet" href="../assets/highlight.css" />
    <script defer src="../assets/main.js"></script>
    <script async src="../assets/icons.js" id="tsd-icons-script"></script>
    <script async src="../assets/search.js" id="tsd-search-script"></script>
    <script async src="../assets/navigation.js" id="tsd-nav-script"></script>
  </head>
  <body>
    <script>
      document.documentElement.dataset.theme =
        localStorage.getItem("tsd-theme") || "os";
      document.body.style.display = "none";
      setTimeout(
        () =>
          app ? app.showPage() : document.body.style.removeProperty("display"),
        500,
      );
    </script>
    <header class="tsd-page-toolbar">
      <div class="tsd-toolbar-contents container">
        <div class="table-cell" id="tsd-search" data-base="..">
          <div class="field">
            <label
              for="tsd-search-field"
              class="tsd-widget tsd-toolbar-icon search no-caption"
              ><svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <use href="../assets/icons.svg#icon-search"></use></svg></label
            ><input type="text" id="tsd-search-field" aria-label="Search" />
          </div>
          <div class="field"><div id="tsd-toolbar-links"></div></div>
          <ul class="results">
            <li class="state loading">Preparing search index...</li>
            <li class="state failure">The search index is not available</li>
          </ul>
          <a href="../index.html" class="title">tarsec</a>
        </div>
        <div class="table-cell" id="tsd-widgets">
          <a
            href="#"
            class="tsd-widget tsd-toolbar-icon menu no-caption"
            data-toggle="menu"
            aria-label="Menu"
            ><svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <use href="../assets/icons.svg#icon-menu"></use></svg
          ></a>
        </div>
      </div>
    </header>
    <div class="container container-main">
      <div class="col-content">
        <div class="tsd-page-title">
          <ul class="tsd-breadcrumb">
            <li><a href="../modules.html">tarsec</a></li>
            <li><a href="trace.html">trace</a></li>
          </ul>
          <h1>Function trace</h1>
        </div>
        <section class="tsd-panel">
          <ul class="tsd-signatures">
            <li class="tsd-signature tsd-anchor-link">
              <a id="trace" class="tsd-anchor"></a
              ><span class="tsd-kind-call-signature">trace</span
              ><span class="tsd-signature-symbol">&lt;</span
              ><a
                class="tsd-signature-type tsd-kind-type-parameter"
                href="trace.html#trace.T"
                >T</a
              ><span class="tsd-signature-symbol">, </span
              ><a
                class="tsd-signature-type tsd-kind-type-parameter"
                href="trace.html#trace.C"
                >C</a
              ><span class="tsd-signature-symbol">&gt;</span
              ><span class="tsd-signature-symbol">(</span
              ><span class="tsd-kind-parameter">name</span>,
              <span class="tsd-kind-parameter">parser</span
              ><span class="tsd-signature-symbol">)</span
              ><span class="tsd-signature-symbol">: </span
              ><a
                href="../types/CaptureParser.html"
                class="tsd-signature-type tsd-kind-type-alias"
                >CaptureParser</a
              ><span class="tsd-signature-symbol">&lt;</span
              ><a
                class="tsd-signature-type tsd-kind-type-parameter"
                href="trace.html#trace.T"
                >T</a
              ><span class="tsd-signature-symbol">, </span
              ><a
                class="tsd-signature-type tsd-kind-type-parameter"
                href="trace.html#trace.C"
                >C</a
              ><span class="tsd-signature-symbol">&gt;</span
              ><a href="#trace" aria-label="Permalink" class="tsd-anchor-icon"
                ><svg viewBox="0 0 24 24">
                  <use href="../assets/icons.svg#icon-anchor"></use></svg
              ></a>
            </li>
            <li class="tsd-description">
              <div class="tsd-comment tsd-typography">
                <p>
                  This function is used internally with debug mode. Given a
                  parser and a debug name for it, when the parser is called,
                  <code>trace</code> will:
                </p>
                <ol>
                  <li>Print a line when the parser starts</li>
                  <li>
                    print a line when the parser ends, indicating success or
                    failure.
                  </li>
                  <li>
                    If the parser returns any captures, print the captures.
                  </li>
                  <li>Count the number of times this parser has been run.</li>
                  <li>Track the total time this parser has taken.</li>
                  <li>
                    Track the total number of steps your parser has taken (a
                    step equals one parser invocation). So, for example, you may
                    find out that your parser to parse Markdown has taken 50
                    steps to parse that file.
                  </li>
                </ol>
                <p>
                  All this happens only if debug mode is on, which you can turn
                  on by using <code>parserDebug</code>, or setting the env var
                  <code>DEBUG</code> to <code>1</code>.
                </p>
                <p>
                  Caveat: If you have debug mode on through an environment
                  variable, <code>trace</code> will capture counts and times for
                  all parsers across your entire application. If you want to
                  profile just a particular section of code, use
                  <code>parserDebug</code> instead. If you <em>do</em> want to
                  track constant times for all parsers, don&#39;t use
                  <code>parserDebug</code> as it will reset those.
                </p>
                <p>
                  <code>trace</code> works with tarsec&#39;s built-in parsers
                  out of the box. You can easily set it up to work with your
                  custom parser too.
                </p>
                <p>For example, if your parser looks like this:</p>
                <pre><code class="language-ts"><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-9">myParser</span><span class="hl-0"> = (</span><span class="hl-1">input</span><span class="hl-0">:</span><span class="hl-11">string</span><span class="hl-0">) </span><span class="hl-8">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">input</span><span class="hl-0"> === </span><span class="hl-3">&quot;hello&quot;</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> { </span><span class="hl-1">success:</span><span class="hl-0"> </span><span class="hl-8">true</span><span class="hl-0">, </span><span class="hl-1">result:</span><span class="hl-0"> </span><span class="hl-3">&quot;hello&quot;</span><span class="hl-0">, </span><span class="hl-1">rest:</span><span class="hl-0"> </span><span class="hl-3">&quot;&quot;</span><span class="hl-0"> };</span><br/><span class="hl-0"> }</span><br/><span class="hl-7">return</span><span class="hl-0"> { </span><span class="hl-1">success:</span><span class="hl-0"> </span><span class="hl-8">false</span><span class="hl-0">, </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-3">&quot;expected hello&quot;</span><span class="hl-0">, </span><span class="hl-1">rest:</span><span class="hl-0"> </span><span class="hl-1">input</span><span class="hl-0"> };</span><br/><span class="hl-0">}</span>
</code><button>Copy</button></pre>
                <p>You can wrap it in <code>trace</code> like this:</p>
                <pre><code class="language-ts"><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-5">myParser</span><span class="hl-0"> = </span><span class="hl-9">trace</span><span class="hl-0">(</span><span class="hl-3">&quot;myParser&quot;</span><span class="hl-0">, (</span><span class="hl-1">input</span><span class="hl-0">:</span><span class="hl-11">string</span><span class="hl-0">) </span><span class="hl-8">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">input</span><span class="hl-0"> === </span><span class="hl-3">&quot;hello&quot;</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> { </span><span class="hl-1">success:</span><span class="hl-0"> </span><span class="hl-8">true</span><span class="hl-0">, </span><span class="hl-1">result:</span><span class="hl-0"> </span><span class="hl-3">&quot;hello&quot;</span><span class="hl-0">, </span><span class="hl-1">rest:</span><span class="hl-0"> </span><span class="hl-3">&quot;&quot;</span><span class="hl-0"> };</span><br/><span class="hl-0">}</span><br/><span class="hl-7">return</span><span class="hl-0"> { </span><span class="hl-1">success:</span><span class="hl-0"> </span><span class="hl-8">false</span><span class="hl-0">, </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-3">&quot;expected hello&quot;</span><span class="hl-0">, </span><span class="hl-1">rest:</span><span class="hl-0"> </span><span class="hl-1">input</span><span class="hl-0"> };</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
                <p>
                  Now, when you run
                  <code>myParser(&quot;hello&quot;)</code> with debug mode on,
                  you will see the debug output.
                </p>
                <p>
                  Some parsers, like <code>seq</code>, are very general. You
                  might have a few parser that use <code>seq</code>. So when you
                  see <code>seq</code> debug output, you might not know which
                  <code>seq</code> parser that means. ou can pass
                  <code>seq</code> a debug name as an optional third argument to
                  be used in the debug output. This name is used to track count
                  and time, so using this name will also mean this
                  <code>seq</code> parser&#39;s count and time are tracked
                  separately from the other <code>seq</code> parsers, which
                  might be useful.
                </p>
              </div>
              <section class="tsd-panel">
                <h4>Type Parameters</h4>
                <ul class="tsd-type-parameter-list">
                  <li>
                    <span
                      ><a id="trace.T" class="tsd-anchor"></a
                      ><span class="tsd-kind-type-parameter">T</span></span
                    >
                  </li>
                  <li>
                    <span
                      ><a id="trace.C" class="tsd-anchor"></a
                      ><span class="tsd-kind-type-parameter">C</span
                      ><span class="tsd-signature-keyword"> extends </span
                      ><a
                        href="../types/PlainObject.html"
                        class="tsd-signature-type tsd-kind-type-alias"
                        >PlainObject</a
                      ></span
                    >
                  </li>
                </ul>
              </section>
              <div class="tsd-parameters">
                <h4 class="tsd-parameters-title">Parameters</h4>
                <ul class="tsd-parameter-list">
                  <li>
                    <span
                      ><span class="tsd-kind-parameter">name</span>:
                      <span class="tsd-signature-type">string</span></span
                    >
                    <div class="tsd-comment tsd-typography">
                      <p>debug name for parser</p>
                    </div>
                    <div class="tsd-comment tsd-typography"></div>
                  </li>
                  <li>
                    <span
                      ><span class="tsd-kind-parameter">parser</span>:
                      <a
                        href="../types/CaptureParser.html"
                        class="tsd-signature-type tsd-kind-type-alias"
                        >CaptureParser</a
                      ><span class="tsd-signature-symbol">&lt;</span
                      ><a
                        class="tsd-signature-type tsd-kind-type-parameter"
                        href="trace.html#trace.T"
                        >T</a
                      ><span class="tsd-signature-symbol">, </span
                      ><a
                        class="tsd-signature-type tsd-kind-type-parameter"
                        href="trace.html#trace.C"
                        >C</a
                      ><span class="tsd-signature-symbol">&gt;</span></span
                    >
                    <div class="tsd-comment tsd-typography">
                      <p>parser to run</p>
                    </div>
                    <div class="tsd-comment tsd-typography"></div>
                  </li>
                </ul>
              </div>
              <h4 class="tsd-returns-title">
                Returns
                <a
                  href="../types/CaptureParser.html"
                  class="tsd-signature-type tsd-kind-type-alias"
                  >CaptureParser</a
                ><span class="tsd-signature-symbol">&lt;</span
                ><a
                  class="tsd-signature-type tsd-kind-type-parameter"
                  href="trace.html#trace.T"
                  >T</a
                ><span class="tsd-signature-symbol">, </span
                ><a
                  class="tsd-signature-type tsd-kind-type-parameter"
                  href="trace.html#trace.C"
                  >C</a
                ><span class="tsd-signature-symbol">&gt;</span>
              </h4>
              <div class="tsd-comment tsd-typography"></div>
            </li>
            <li class="tsd-signature tsd-anchor-link">
              <a id="trace-1" class="tsd-anchor"></a
              ><span class="tsd-kind-call-signature">trace</span
              ><span class="tsd-signature-symbol">&lt;</span
              ><a
                class="tsd-signature-type tsd-kind-type-parameter"
                href="trace.html#trace-1.T-1"
                >T</a
              ><span class="tsd-signature-symbol">&gt;</span
              ><span class="tsd-signature-symbol">(</span
              ><span class="tsd-kind-parameter">name</span>,
              <span class="tsd-kind-parameter">parser</span
              ><span class="tsd-signature-symbol">)</span
              ><span class="tsd-signature-symbol">: </span
              ><a
                href="../types/Parser.html"
                class="tsd-signature-type tsd-kind-type-alias"
                >Parser</a
              ><span class="tsd-signature-symbol">&lt;</span
              ><a
                class="tsd-signature-type tsd-kind-type-parameter"
                href="trace.html#trace-1.T-1"
                >T</a
              ><span class="tsd-signature-symbol">&gt;</span
              ><a href="#trace-1" aria-label="Permalink" class="tsd-anchor-icon"
                ><svg viewBox="0 0 24 24">
                  <use href="../assets/icons.svg#icon-anchor"></use></svg
              ></a>
            </li>
            <li class="tsd-description">
              <section class="tsd-panel">
                <h4>Type Parameters</h4>
                <ul class="tsd-type-parameter-list">
                  <li>
                    <span
                      ><a id="trace-1.T-1" class="tsd-anchor"></a
                      ><span class="tsd-kind-type-parameter">T</span></span
                    >
                  </li>
                </ul>
              </section>
              <div class="tsd-parameters">
                <h4 class="tsd-parameters-title">Parameters</h4>
                <ul class="tsd-parameter-list">
                  <li>
                    <span
                      ><span class="tsd-kind-parameter">name</span>:
                      <span class="tsd-signature-type">string</span></span
                    >
                  </li>
                  <li>
                    <span
                      ><span class="tsd-kind-parameter">parser</span>:
                      <a
                        href="../types/Parser.html"
                        class="tsd-signature-type tsd-kind-type-alias"
                        >Parser</a
                      ><span class="tsd-signature-symbol">&lt;</span
                      ><a
                        class="tsd-signature-type tsd-kind-type-parameter"
                        href="trace.html#trace-1.T-1"
                        >T</a
                      ><span class="tsd-signature-symbol">&gt;</span></span
                    >
                  </li>
                </ul>
              </div>
              <h4 class="tsd-returns-title">
                Returns
                <a
                  href="../types/Parser.html"
                  class="tsd-signature-type tsd-kind-type-alias"
                  >Parser</a
                ><span class="tsd-signature-symbol">&lt;</span
                ><a
                  class="tsd-signature-type tsd-kind-type-parameter"
                  href="trace.html#trace-1.T-1"
                  >T</a
                ><span class="tsd-signature-symbol">&gt;</span>
              </h4>
            </li>
          </ul>
        </section>
      </div>
      <div class="col-sidebar">
        <div class="page-menu">
          <div class="tsd-navigation settings">
            <details class="tsd-index-accordion">
              <summary class="tsd-accordion-summary">
                <h3>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <use href="../assets/icons.svg#icon-chevronDown"></use></svg
                  >Settings
                </h3>
              </summary>
              <div class="tsd-accordion-details">
                <div class="tsd-filter-visibility">
                  <h4 class="uppercase">Member Visibility</h4>
                  <form>
                    <ul id="tsd-filter-options">
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-protected"
                            name="protected"
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>Protected</span></label
                        >
                      </li>
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-private"
                            name="private"
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>Private</span></label
                        >
                      </li>
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-inherited"
                            name="inherited"
                            checked
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>Inherited</span></label
                        >
                      </li>
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-external"
                            name="external"
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>External</span></label
                        >
                      </li>
                    </ul>
                  </form>
                </div>
                <div class="tsd-theme-toggle">
                  <h4 class="uppercase">Theme</h4>
                  <select id="tsd-theme">
                    <option value="os">OS</option>
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                  </select>
                </div>
              </div>
            </details>
          </div>
        </div>
        <div class="site-menu">
          <nav class="tsd-navigation">
            <a href="../modules.html"
              ><svg class="tsd-kind-icon" viewBox="0 0 24 24">
                <use href="../assets/icons.svg#icon-1"></use></svg
              ><span>tarsec</span></a
            >
            <ul
              class="tsd-small-nested-navigation"
              id="tsd-nav-container"
              data-base=".."
            >
              <li>Loading...</li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <div class="tsd-generator">
      <p>
        Generated using
        <a href="https://typedoc.org/" target="_blank">TypeDoc</a>
      </p>
    </div>
    <div class="overlay"></div>
  </body>
</html>
